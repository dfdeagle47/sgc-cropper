define("CropModal",[],function(){return Backbone.Marionette.ItemView.extend({constructor:function(t){var i=Backbone.Marionette.ItemView.prototype.constructor.apply(this,arguments);return this.imageFile=t.image,i},cropImg:function(){var t=this.outlets.img.sgCrop(300);this.trigger("crop",t),this.close()},onRender:function(){var t=new FileReader;t.readAsDataURL(this.imageFile);var i=this;t.onload=function(t){i.outlets.img.attr("src",t.target.result)}},imageLoaded:function(){var t=300,i=Math.max(this.outlets.img.width()-t,0),e=Math.max(this.outlets.img.height()-t,0),o=i/2,a=o+t,r=e/2,n=r+t;this.outlets.img.sgJcrop({aspectRatio:1,setSelect:[o,r,a,n]})}})}),define("jquery-crop",[],function(){$.fn.sgCrop=function(t){if(t){var i=!1;if(!$(t).is("canvas")){var e;e=t instanceof Array?t:1>=t?[this.actualImgWidth*t,this.actualImgHeight*t]:[t,t],t=document.createElement("canvas"),t.width=e[0],t.height=e[1],$(t).hide(),$("body").append(t),i=!0}t=t[0]||t;var o=t.getContext("2d"),a=this.actualImgWidth/this.width(),r=this.actualImgHeight/this.height(),n=this.jcrop_api.ui.selection.position().left,s=this.jcrop_api.ui.selection.position().top,c=this.jcrop_api.ui.selection.width(),h=this.jcrop_api.ui.selection.height();o.drawImage(this[0],n*a,s*r,c*a,h*r,0,0,$(t).width(),$(t).height());var g=t.toDataURL("image/jpeg");return i&&t.remove(),g}}}),define("sgc-cropper",["./CropModal","./jquery-crop"],function(t){return{Cropper:t}});