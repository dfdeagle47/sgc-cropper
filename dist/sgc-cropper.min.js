define("CropModal",[],function(){return Backbone.Marionette.ItemView.extend({constructor:function(t){var i=Backbone.Marionette.ItemView.prototype.constructor.apply(this,arguments);return this.imageFile=t.image,i},cropImg:function(){var t=this.outlets.img.sgCrop(300);this.trigger("crop",t),this.close()},onRender:function(){var t=new FileReader;t.readAsDataURL(this.imageFile);var i=this;t.onload=function(t){i.outlets.img.attr("src",t.target.result)}},imageLoaded:function(){var t=300,i=Math.max(this.outlets.img.width()-t,0),e=Math.max(this.outlets.img.height()-t,0),a=i/2,o=a+t,r=e/2,h=r+t;this.outlets.img.sgJcrop({aspectRatio:1,setSelect:[a,r,o,h]})}})}),define("jquery-crop",[],function(){$.fn.sgJcrop=function(t){var i=this;this.Jcrop(t,function(){i.jcrop_api=this}),this.actualImgWidth=i[0].width,this.actualImgHeight=i[0].height,this.load(function(){i.actualImgWidth=i[0].width,i.actualImgHeight=i[0].height})},$.fn.sgCrop=function(t){if(t){var i=!1;if(!$(t).is("canvas")){var e;e=t instanceof Array?t:1>=t?[this.actualImgWidth*t,this.actualImgHeight*t]:[t,t],t=document.createElement("canvas"),t.width=e[0],t.height=e[1],$(t).hide(),$("body").append(t),i=!0}t=t[0]||t;var a=t.getContext("2d"),o=this.actualImgWidth/this.width(),r=this.actualImgHeight/this.height(),h=this.jcrop_api.ui.selection.position().left,n=this.jcrop_api.ui.selection.position().top,s=this.jcrop_api.ui.selection.width(),c=this.jcrop_api.ui.selection.height();a.drawImage(this[0],h*o,n*r,s*o,c*r,0,0,$(t).width(),$(t).height());var g=t.toDataURL("image/jpeg");return i&&t.remove(),g}}}),define("sgc-cropper",["./CropModal","./jquery-crop"],function(t){return{Cropper:t}});